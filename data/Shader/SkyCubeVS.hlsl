//=============================================================================
//
// スカイキューブ処理 [SkyCubeVS.hlsl]
// Author : RIKU TANEKAWA
//
//=============================================================================

//=============================================================================
// 定数バッファ
//=============================================================================
float4x4 gInvViewProj; // 


//=============================================================================
// 頂点シェーダ入力
//=============================================================================
struct VS_INPUT
{
    float4 Pos : POSITION0;
};

//=============================================================================
// 頂点シェーダ出力
//=============================================================================
struct VS_OUTPUT
{
    float4 Pos      : POSITION0;
    float3 Dir      : TEXCOORD0;
};

//=============================================================================
// 頂点シェーダ本体
//=============================================================================
VS_OUTPUT VSMain(VS_INPUT In)
{
    VS_OUTPUT Out;

    // そのまま描画（XYZRHW）
    Out.Pos = In.Pos;

    // NDC → ワールド方向
    float4 ndc = In.Pos;
    ndc.z = 1.0f;
    ndc.w = 1.0f;

    float4 world = mul(ndc, gInvViewProj);

    Out.Dir = normalize(world.xyz / world.w);

    return Out;
}